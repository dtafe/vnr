@using HRM.Infrastructure.Utilities
@using HRM.Presentation.UI.Controls.Kendo

@using System.Collections;
@using HRM.Presentation.Hr.Models
@using HRM.Infrastructure.Security
@model Hre_ContractModel

@{
    Layout = null;
    var _hrm_Hre_Service = ConstantPathWeb.Hrm_Hre_Service;
    var _hrm_Hr_Service = ConstantPathWeb.Hrm_Hre_Service;
    var lineId = Model == null ? Guid.Empty : Model.ID;
    var _hrm_Main_Web = ConstantPathWeb.Hrm_Main_Web;

    var _hrm_Sys_Service = ConstantPathWeb.Hrm_Sys_Service;
    Guid ProfileID = Guid.Empty;
    var ProfileName = string.Empty;
    string aaa = ViewBag.profileID;
    if (!string.IsNullOrEmpty(aaa))
    {
        ProfileID = Common.ConvertToGuid(aaa.ToString());
    }
    var contractID = Guid.Empty;
    if (Model != null)
    {
        contractID = Model.ID;
    }

    string lstProfileIDs = "";
    if (ViewData["lstProfileIDs"] != null)
    {
        lstProfileIDs = ViewData["lstProfileIDs"].ToString();
    }
}

<script>
    SetFieldRequiredByScreenName('Hre_ProfileNotContract');
    var grid = document.getElementById("girdAppendContract");
    if ($("#windowContract_wnd_title").text() == '@Html.Raw(ConstantDisplay.HRM_HR_Contract_Update.TranslateString())') {
        grid.hidden = false;
    }


    @*function onSaveNew() {

        onSaveAndContinue($('#form_hre_contract'), '@_hrm_Hre_Service', 'api/Hre_Contract/', 'gridHre_Contract', 'windowContract'); return false;


    }*@


    function onSaveClose() {
        $("#ProfileID").val(selectedIds)
        var rs = onSaveAndClose($('#form_hre_profileNotContract'), '@_hrm_Hre_Service', 'api/Hre_Contract/', 'gridAtt_ReportProfileNotContract', 'windowProfileNotContract');
        if (rs == true) {
            selectedIds = [];
        }
        return false;


    }
    function onSaveDataPopUp() {
        //   alert($("#ProfileID").val());
        $("#ProfileID").val(selectedIds)
        
        var grid = document.getElementById("girdAppendContract");
        var rs = onlySave($('#form_hre_profileNotContract'), '@_hrm_Hre_Service', 'api/Hre_Contract/', 'gridAtt_ReportProfileNotContract');
        if (rs == true) {
            grid.hidden = false;
            selectedIds = [];
        }
    }
</script>
@{
    var window = new WindowBuilderInfo
    {
        Name = "windowAppendixContract",
        Visible = false,
        Title = @ConstantDisplay.HRM_Category_ExportItem.TranslateString(),
        LoadContentFrom = _hrm_Main_Web + "Hre_Contract/AppendixContractInfo/",
    };
}
@(Html.VnrWindow(window))
@{
    var windowError = new WindowBuilderInfo
    {
        Name = "windowError",
        Visible = false,
        Height = 150,
        Width = 300,
        Title = "Thông Báo Lỗi",
        Content = "<br><br><center><b>Vui Lòng Lưu Kết Xuất Dữ Liệu Trước Khi Tạo Mới Dữ Liệu Kết Xuất Chi Tiết!!!</b></center>"
    };
}
@(Html.VnrWindow(windowError))



<script type="text/javascript">
    var gridName = '@ConstantControlName.HRM_HR_AppendixContract_Grid_Name.TranslateString()';
    var popUpName = '@ConstantControlName.HRM_HR_AppendixContract_PopUp_Name.TranslateString()';
    var titleEditPopUp = '@Html.Raw(ConstantDisplay.HRM_HR_AppendixContract_PopUp_Edit_Title.TranslateString())';
    var titleCreatePopUp = '@Html.Raw(ConstantDisplay.HRM_HR_AppendixContract_PopUp_Create_Title.TranslateString())';

    $("#btnCreateAppendixContract").click(function () {
        

        var x = $('#@Html.FieldIdFor(model => model.ID)').val();

        if (x == '') {
            PopUpCreate("windowError");
        }
        else {
            var profileMulti = $("#ProfileID").data("kendoMultiSelect");
            setTimeout(function () {
                PopUpCreate("windowAppendixContract", titleCreatePopUp, '@ConstantPermission.Hre_AppendixContract')
            }, 1000)
            $("#ProfileName").val(profileMulti._dataItems[0].ProfileName);
            alert($("#ProfileName").val());
        }

    });


    //Xử lý sự kiện click button tìm kiếm
    $(document).ready(function () {
    @{
        if (lstProfileIDs != string.Empty)
        {
            <text>                    
               setTimeout(function () {
                   $.ajax({
                       type: 'POST',
                       url: '@_hrm_Hr_Service' + "Hre_GetData/GetProfileNameByProfileID/",
                       data: { profileIds: '@lstProfileIDs' },
                       dataType: 'json',
                       async: false,
                       success: function (data) {
                           var dataSource = new kendo.data.DataSource();
                           var ItemsSelect = [];
                           for (var i = 0; i < data.length; i++) {
                               dataSource.add({ ID: data[i].ID, ProfileName: data[i].ProfileName });
                               ItemsSelect.push(data[i].ID);
                           }
                           var Profilemultiselect = $("#ProfileNotContractInfo_ProfileID").data("kendoMultiSelect");
                           if (Profilemultiselect != undefined) {
                               Profilemultiselect.setDataSource(dataSource);
                               Profilemultiselect.value(ItemsSelect);
                           }
                       },
                   });
               }, 500);   
            </text>
        }  
    }


        //Show Hide Panel
        ShowHidePanel();


        //Xử lý Edit popup
        var url = '@_hrm_Main_Web' + "Hre_Contract/AppendixContractInfo/";
        EditGridPopUp(gridName, "windowAppendixContract", url, '@ConstantPermission.Hre_Contract', titleEditPopUp);
    });


    GridCheckbox(gridName);

    //Xóa PLHĐ
    $('#btnDelete').click(function (e) {
        var isAccess = checkPermission(PrivilegeType.Delete, '@ConstantPermission.Hre_AppendixContract');
        if (!isAccess) {
            return;
        }
        if (selectedIds == "") {
            DeleteFail();
            return;
        }
        DeleteSelected(gridName, '@_hrm_Main_Web' + "Hre_AppendixContract/RemoveSelected/", selectedIds.join(","));
    });

    $("#btnGetBasicSalary").click(function () {
        

        var _profileID = $('#@Html.FieldIdFor(model => model.ProfileID)').val();
        $.ajax({
            url: '@_hrm_Hre_Service' + "Hre_GetData/GetBasicSalaryByProfileID",
            data: { ProfileID: _profileID },
            type: 'POST',
            datatype: 'json',
            success: function (data) {
                
                if (data == "Error") {
                    WarningMessages("Bạn Chưa Nhập Nhân Viên");
                } else if (data == "NoBasicSalary") {
                    WarningMessages("Nhân Viên Chưa Có Lương Căn Bản");
                }
                if (data != null) {
                    var Salary = $("#Salary").data("kendoNumericTextBox");
                    Salary.value(data.GrossAmount);
                }

            }

        });
    });

    function ContractTypeSelect(e) {
        
        var _dateStart = $("#ProfileNotContractInfo_DateStart").data("kendoDatePicker");
        var _dateSigned = $("#ProfileNotContractInfo_DateSigned").data("kendoDatePicker");
        var _dateEnd = $("#ProfileNotContractInfo_DateEnd").data("kendoDatePicker");
        var _profileID = $("#ProfileNotContractInfo_ProfileID").val();

        var currentDate = new Date();
        var day = currentDate.getDate();
        var month = currentDate.getMonth() + 1 ;
        var year = currentDate.getFullYear();
        var date = day + "/" + month + "/" + year;

        var dataItem = this.dataSource.view()[e.item.index()];

        $.ajax({
            url: '@_hrm_Hre_Service' + "Hre_GetData/GetContratcTypeByID",
            data: { ContractTypeID: dataItem.ID, ProfileID: _profileID.toString() },
            type: 'POST',
            datatype: 'json',
            success: function (data) {
                
                if (data.DateStart != null && data.DateEnd != null) {
                    var dHire = new Date(parseInt(data.DateStart.slice(6, -2)));
                    var _monthHire = 1 + dHire.getMonth();
                    var _dayHire = dHire.getDate();
                    var _yearHire = dHire.getFullYear();
                    var fullDateHire = _dayHire + "/" + _monthHire + "/" + _yearHire;
                    _dateStart.value(fullDateHire);

                    var dEndProbation = new Date(parseInt(data.DateEnd.slice(6, -2)));
                    var _monthEndProbation = 1 + dEndProbation.getMonth();
                    var _dayEndProbation = dEndProbation.getDate();
                    var _yearEndProbation = dEndProbation.getFullYear();
                    var fullDateEndProbation = _dayEndProbation + "/" + _monthEndProbation + "/" + _yearEndProbation;
                    _dateEnd.value(fullDateEndProbation);
                    return;
                }
                if (data.DateSigned != null) {
                    _dateStart.value(date);
                    _dateSigned.value(date);
                    var d = new Date(parseInt(data.DateSigned.slice(6, -2)));
                    var _month = 1 + d.getMonth();
                    var _day = d.getDate();
                    var _year = d.getFullYear();
                    var fullDate = _day + "/" + _month + "/" + _year;
                    _dateEnd.value(fullDate);
                } else {
                    _dateEnd.value("");
                }
            }

        });
    }
</script>
<!--Form dùng cho edit và update-->
@using (Html.BeginForm("#", "", FormMethod.Post, new { id = "form_hre_profileNotContract" }))
{
    @Html.HiddenFor(model => model.ID)
    <div>
        @if (Model != null)
        {
            @Html.HiddenFor(m => m.ProfileID)
               @Html.HiddenFor(m => m.ProfileName)
        }
        else
        {
            @Html.Hidden("SProfileID", ProfileID)
               @Html.Hidden("ProfileName", ProfileName)
            
            @*@Html.HiddenFor(m => m.ProfileID, ProfileID)*@
        }

    </div>
    <table style="width:100px;">
        <tbody>
            <tr><td colspan="3" style=""></td></tr>
            <tr>
                <td class="">&nbsp;&nbsp;&nbsp;</td>
                <td valign="top">
                    <div style="overflow: hidden; width: 1050px">
                        <div style="display: block;float: left; width:100%">
                            <div style="display: block">
                                <fieldset>
                                    <legend>
                                        @ConstantDisplay.HRM_HR_ContractCondition.TranslateString()
                                    </legend>
                                    <div style="float:left; width:100%">
                                        <div style="float: left; width: 500px">
                                            <div style="float:left">


                                            </div>
                                            <div class="DivContentTitleValue" id="div13">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.ProfileID)
                                                    @Html.HiddenFor(mode => mode.ID)
                                                    @Html.HiddenFor(mode => mode.ProfileIDs)
                                                    @*@Html.HiddenFor(mode => mode.ProfileID)*@
                                                </div>
                                                <div class="FieldValue">
                                                    @{
                                                        IEnumerable valueProfile = new string[] { };
                                                        if (Model != null)
                                                        {
                                                            valueProfile = new[] { new { ProfileName = Model.ProfileName, ID = Model.ProfileID } };
                                                        }
                                                    }
                                                    @{
                                                        var Profile = new MultiSelectBuilderInfo()
                                                        {
                                                            Name = "ProfileNotContractInfo_ProfileID",
                                                            DataTextField = "ProfileName",
                                                            DataValueField = "ID",
                                                            Url = @_hrm_Hre_Service + "Hre_GetData/GetAllMultiProfile",
                                                            Placeholder = ConstantDisplay.HRM_HR_SelectProfile.TranslateString(),
                                                            Value = valueProfile,
                                                            Autobind = true,
                                                            Width =300
                                                        };
                                                    }
                                                    @(Html.VnrMultiSelectFor(mode => mode.ProfileID, Profile))
                                                </div>
                                            </div>
                                            <script>
                                                $(document).ready(function () {
                                                    debugger;
                                                        var multiselect = $("#ProfileNotContractInfo_ProfileID").data("kendoMultiSelect")
                                                        multiselect.value(selectedIds);

                                                    });
                                                </script>
                                            <div id="div4" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.ContractNo)
                                                </div>
                                                <div class="FieldValue">
                                                    @Html.VnrTextBoxFor(model => model.ContractNo, "width: 300px")
                                                </div>

                                            </div>
                                            <div id="div6" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.ContractTypeID)
                                                </div>
                                                <div class="FieldValue">
                                                    <!--Xử lý gán trực tiếp dữ liệu cho Multi, không cần load dữ liệu từ database lên, giảm kết nối đến database khi edit-->
                                                    @{
    IEnumerable valueContractType = new string[] { };
    if (Model != null)
    {
        valueContractType = new[] { new { ContractTypeName = Model.ContractTypeName, ID = Model.ContractTypeID } };
    }
                                                    }
                                                    @{
    var contractTypeID = new MultiSelectBuilderInfo
    {
        Name = "ProfileNotContractInfo_ContractTypeID",
        DataTextField = "ContractTypeName",
        DataValueField = "ID",
        Url = _hrm_Hr_Service + "Cat_GetData/GetMultiContractType",
        MaxSelectedItems = 1,
        Placeholder = ConstantDisplay.HRM_Category_SelectContractType.TranslateString(),
        Value = valueContractType,
        EventSelect = "ContractTypeSelect",
        Width =300
    };
                                                    }
                                                    @Html.VnrMultiSelectFor(mode => mode.ContractTypeID, contractTypeID)
                                                </div>
                                            </div>
                                            <div id="div9" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.DateStart)
                                                </div>
                                                <div class="FieldValue">
                                                    @{
    var dateStart = new DatePickerBuilderInfo()
    {
        StyleCss = "width:120px",
        Name = "ProfileNotContractInfo_DateStart"
    };
                                                    }
                                                    @Html.VnrDatePickerFor(model => model.DateStart, dateStart)
                                                </div>
                                            </div>
                                            <div id="div10" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.DateEnd)
                                                </div>

                                                <div class="FieldValue">
                                                    @{
    var dateEnd = new DatePickerBuilderInfo()
    {
        StyleCss = "width:120px",
        Name = "ProfileNotContractInfo_DateEnd"
    };
                                                    }
                                                    @Html.VnrDatePickerFor(model => model.DateEnd, dateEnd)
                                                </div>
                                            </div>
                                            <div id="div8" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.DateSigned)
                                                </div>
                                                <div class="FieldValue">
                                                    @{
    var dateSigned = new DatePickerBuilderInfo()
    {
        StyleCss = "width:120px",
        Name = "ProfileNotContractInfo_DateSigned"
    };
                                                    }
                                                    @Html.VnrDatePickerFor(model => model.DateSigned, dateSigned)
                                                </div>
                                            </div>

                                            <div id="div3" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.HourWorkInMonth)
                                                </div>
                                                <div class="FieldValue">
                                                    @{
    var HourWorkInMonth = new NumericTextBoxBuilderInfo<double>()
    {
        Name = "ProfileNotContractInfo_HourWorkInMonth",
        StyleCss = "width:150px",
        Format = ConstantFormat.HRM_Format_Number_Double
    };
                                                    }
                                                    @Html.VnrNumericTextBoxFor(model => model.HourWorkInMonth, HourWorkInMonth)
                                                </div>
                                            </div>
                                        </div>
                                        <div style="float: left; width: 500px;">
                                            <div id="div5" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.JobTitleID)
                                                </div>
                                                <div class="FieldValue">
                                                    <!--Xử lý gán trực tiếp dữ liệu cho Multi, không cần load dữ liệu từ database lên, giảm kết nối đến database khi edit-->
                                                    @{
    IEnumerable valuejobTitle = new string[] { };
    if (Model != null)
    {
        valuejobTitle = new[] { new { JobTitleName = Model.JobTitleName, ID = Model.JobTitleID } };
    }
                                                    }
                                                    @{
    var jobTitleID = new MultiSelectBuilderInfo
    {
        Name = "ProfileNotContractInfo_JobTitleID",
        DataTextField = "JobTitleName",
        DataValueField = "ID",
        Url = _hrm_Hr_Service + "Cat_GetData/GetMultiJobTitle",
        MaxSelectedItems = 1,
        Placeholder = ConstantDisplay.HRM_Category_SelectJobTitle.TranslateString(),
        Value = valuejobTitle,
        Width =300
    };
                                                    }
                                                    @Html.VnrMultiSelectFor(mode => mode.JobTitleID, jobTitleID)
                                                </div>
                                            </div>
                                            <div id="div11" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.PositionID)
                                                </div>
                                                <div class="FieldValue">
                                                    @{
    IEnumerable valuePosition = new string[] { };
    if (Model != null)
    {
        valuePosition = new[] { new { PositionName = Model.PositionName, ID = Model.PositionID } };
    }
                                                    }
                                                    @{
    var positionID = new MultiSelectBuilderInfo()
    {
        Name = "ProfileNotContractInfo_PositionID",
        DataTextField = "PositionName",
        DataValueField = "ID",
        Url = _hrm_Hr_Service + "Cat_GetData/GetMultiPosition",
        Placeholder = ConstantDisplay.HRM_Category_SelectPosition.TranslateString(),
        Value = valuePosition,
        MaxSelectedItems = 1,
        Width = 300
    };
                                                    }
                                                    @(Html.VnrMultiSelectFor(mode => mode.PositionID, positionID))
                                                </div>
                                            </div>
                                            <div id="div3" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.QualificationID)
                                                </div>
                                                <div class="FieldValue">
                                                    @{
    var QualificationName = new ComboBoxBuilderInfo()
    {
        Name = "ProfileNotContractInfo_QualificationID",
        DataTextField = "QualificationName",
        DataValueField = "ID",
        Url = _hrm_Hr_Service + "Cat_GetData/GetMultiQualification",
        StyleCss = "width:300px;",
        //   Value = Model == null ? string.Empty : Model.QualificationName,

    };
    if (Model != null)
    {
        QualificationName.Value = Model == null ? string.Empty : Model.QualificationID.ToString();
    }
                                                    }
                                                    @(Html.VnrComboBoxFor(mode => mode.QualificationID, QualificationName).Text(Model == null ? string.Empty : Model.QualificationName))
                                                </div>
                                            </div>
                                            <div id="div10" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.ProfileSingID)
                                                </div>
                                                <div class="FieldValue">
                                                    @{
    var displayprofilename = Hre_ContractModel.FieldNames.ProfileName;
    IEnumerable valueProfileSing = new string[] { };
    if (Model != null)
    {
        valueProfileSing = new[] { new { ProfileSingName = Model.ProfileSingName, ID = Model.ProfileSingID } };
    }

    if (Model != null && Model.ProfileSingName != null)
    {
        displayprofilename = Hre_ContractModel.FieldNames.ProfileSingName;
    }

    var ProfileSing = new MultiSelectBuilderInfo()
    {
        Name = "ProfileNotContractInfo_ProfileSingID",
        DataTextField = displayprofilename,
        DataValueField = Hre_ContractModel.FieldNames.ID,
        Url = @_hrm_Hre_Service + "Hre_GetData/GetMultiProfile",
        Placeholder = ConstantDisplay.HRM_HR_SelectProfile.TranslateString(),
        MaxSelectedItems = 1,
        Value = valueProfileSing,
        Width = 300
    };
                                                    }
                                                    @(Html.VnrMultiSelectFor(mode => mode.ProfileSingID, ProfileSing))
                                                </div>
                                            </div>
                                            <div id="div10" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.DateAuthorize)
                                                </div>
                                                <div class="FieldValue">
                                                    @{
    var DateAuthorize = new DatePickerBuilderInfo()
    {
        StyleCss = "width:120px",
        Name = "ProfileNotContractInfo_DateAuthorize"
    };
                                                    }
                                                    @Html.VnrDatePickerFor(model => model.DateAuthorize, DateAuthorize)
                                                </div>
                                            </div>
                                            <div id="div3" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.FollowNo)
                                                </div>
                                                <div class="FieldValue">
                                                    @Html.VnrTextBoxFor(model => model.FollowNo, "width: 300px")
                                                </div>
                                            </div>
                                            <div id="div3" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.WorkPlaceID)
                                                </div>
                                                <div class="FieldValue">
                                                    @{
    var _workplaceName = new ComboBoxBuilderInfo()
    {
        Name = "ProfileNotContractInfo_WorkPlaceID",
        DataTextField = "WorkPlaceName",
        DataValueField = "ID",
        Url = _hrm_Hr_Service + "Cat_GetData/GetMultiWorkPlace",
        StyleCss = "width:300px;",
        Value = Model == null ? string.Empty : Model.WorkPlaceID.ToString(),
    };
                                                    }
                                                    @Html.VnrComboBoxFor(mode => mode.WorkPlaceID, _workplaceName)
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                            <div style="display: block; padding-top: 10px;">
                                <fieldset>
                                    <legend>
                                        @ConstantDisplay.HRM_HR_SalaryContractInformation.TranslateString()
                                    </legend>
                                    <div style="float:left; width:100%">
                                        <div style="float:left; width:500px">
                                            <div id="div3" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.Salary)
                                                </div>
                                                <div class="FieldValue">
                                                    @{
    var Salary = new NumericTextBoxBuilderInfo<double>()
    {
        Name = "ProfileNotContractInfo_Salary",
        StyleCss = "width:150px",
        Format = ConstantFormat.HRM_Format_Money
    };
                                                    }
                                                    @Html.VnrNumericTextBoxFor(model => model.Salary, Salary)
                                                    @{
    var CurrencyName = new ComboBoxBuilderInfo()
    {
        Name = "ProfileNotContractInfo_CurenncyID",
        DataTextField = "CurrencyName",
        DataValueField = "ID",
        Url = _hrm_Hr_Service + "Cat_GetData/GetMultiCurrency",
        StyleCss = "width:135px;",
        Value = Model == null ? string.Empty : Model.CurenncyID.ToString(),
    };
                                                    }
                                                    @(Html.VnrComboBoxFor(mode => mode.CurenncyID, CurrencyName).Text(Model == null ? string.Empty : Model.CurrencySalName))
                                                </div>
                                            </div>
                                            <div id="div3" class="DivContentTitleValue">
                                                <div class="FieldTitle150">

                                                </div>
                                                <div class="FieldValue">
                                                    @{
    var CreateBasicSalary = new CheckBoxBuilderInfo()
    {

    };
    if (Model != null)
    {
        if (Model.CreateBasicSalary == true)
        {
            CreateBasicSalary.Value = true;
        }
        else
        {
            CreateBasicSalary.Value = false;
        }
    }
                                                    }
                                                    @Html.VnrCheckBoxFor(model => model.CreateBasicSalary, CreateBasicSalary)
                                                    <div style="float: right; padding-top: 5px">
                                                        @Html.VnrLabel(ConstantDisplay.HRM_HR_Contract_CreateBasicSalary.TranslateString())
                                                        <a id="btnGetBasicSalary" style="cursor:pointer">@ConstantDisplay.HRM_HR_Profile_ReferBasicSalary.TranslateString()</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="div3" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                </div>
                                                <div class="FieldValue">
                                                    @{
    var BasicSalaryForPerson = new CheckBoxBuilderInfo()
    {
    };
    if (Model != null)
    {
        if (Model.BasicSalaryForPerson == true)
        {
            BasicSalaryForPerson.Value = true;
        }
        else
        {
            BasicSalaryForPerson.Value = false;
        }
    }
                                                    }
                                                    @Html.VnrCheckBoxFor(model => model.BasicSalaryForPerson, BasicSalaryForPerson)
                                                    <div style="float: right; padding-top: 5px">
                                                        @Html.VnrLabel(ConstantDisplay.HRM_HR_Contract_BasicSalaryForPerson.TranslateString())
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="div3" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.InsuranceAmount)
                                                </div>
                                                <div class="FieldValue">
                                                    <div style="float:left">
                                                        @{
    var InsuranceAmount = new NumericTextBoxBuilderInfo<double>()
    {
        Name = "ProfileNotContractInfo_InsuranceAmount",
        StyleCss = "width:150px",
        Format = ConstantFormat.HRM_Format_Money
    };
                                                        }
                                                        @Html.VnrNumericTextBoxFor(model => model.InsuranceAmount, InsuranceAmount)
                                                    </div>
                                                    <div style="float: left; padding-left: 2px">
                                                        @{
    var CurenncyInsName = new ComboBoxBuilderInfo()
    {
        Name = "ProfileNotContractInfo_CurenncyID1",
        DataTextField = "CurrencyName",
        DataValueField = "ID",
        Url = _hrm_Hr_Service + "Cat_GetData/GetMultiCurrency",
        StyleCss = "width:135px;",
        Value = Model == null ? string.Empty : Model.CurenncyID1.ToString(),
    };
                                                        }
                                                        @(Html.VnrComboBoxFor(mode => mode.CurenncyID1, CurenncyInsName).Text(Model == null ? string.Empty : Model.CurenncyInsName))
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="div10" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.PersonalRate)
                                                </div>
                                                <div class="FieldValue">
                                                    @{
    var PersonalRate = new NumericTextBoxBuilderInfo<double>()
    {
        Name = "ProfileNotContractInfo_PersonalRate",
        StyleCss = "width:150px",
        Format = ConstantFormat.HRM_Format_Number_Double
    };
                                                    }
                                                    @Html.VnrNumericTextBoxFor(model => model.PersonalRate, PersonalRate)
                                                </div>
                                            </div>
                                            <div id="div3" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.SalaryClassTypeID)
                                                </div>
                                                <div class="FieldValue">
                                                    @{
    var SalaryClassTypeName = new ComboBoxBuilderInfo()
    {
        Name = "ProfileNotContractInfo_SalaryClassTypeID",
        DataTextField = "SalaryClassTypeName",
        DataValueField = "ID",
        Url = _hrm_Hr_Service + "Cat_GetData/GetMultiSalaryClassType",
        StyleCss = "width:300px;",
        Value = Model == null ? string.Empty : Model.SalaryClassTypeID.ToString(),
    };
                                                    }
                                                    @(Html.VnrComboBoxFor(mode => mode.SalaryClassTypeID, SalaryClassTypeName).Text(Model == null ? string.Empty : Model.SalaryClassTypeName))
                                                </div>
                                            </div>
                                            <div id="div3" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.FormPaySalary)
                                                </div>
                                                <div class="FieldValue">
                                                    @Html.VnrTextBoxFor(mode => mode.FormPaySalary, "width: 300px")
                                                </div>
                                            </div>
                                        </div>
                                        <div style="float: left; width: 500px;">
                                            <div id="div3" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.Allowance1)
                                                </div>
                                                <div class="FieldValue">
                                                    <div style="float:left">
                                                        @{
    var AllowanceID1Name = new ComboBoxBuilderInfo()
    {
        Name = "ProfileNotContractInfo_AllowanceID1",
        DataTextField = "UsualAllowanceName",
        DataValueField = "ID",
        Url = _hrm_Hr_Service + "Cat_GetData/GetMultiUsualAllowance",
        StyleCss = "width:150px;",
        Value = Model == null ? string.Empty : Model.AllowanceID1.ToString(),
    };
                                                        }
                                                        @(Html.VnrComboBoxFor(mode => mode.AllowanceID1, AllowanceID1Name).Text(Model == null ? string.Empty : Model.AllowanceID1Name))

                                                    </div>
                                                    <div style="float: left; padding-left: 2px">
                                                        @{
    var Allowance1 = new NumericTextBoxBuilderInfo<double>()
    {
        Name = "ProfileNotContractInfo_Allowance1",
        StyleCss = "width:90px",
        Format = ConstantFormat.HRM_Format_Money
    };
                                                        }
                                                        @Html.VnrNumericTextBoxFor(model => model.Allowance1, Allowance1)
                                                    </div>
                                                    <div style="float: left; padding-left: 2px">
                                                        @{
    var CurenncyID2Name = new ComboBoxBuilderInfo()
    {
        Name = "ProfileNotContractInfo_CurenncyID2",
        DataTextField = "CurrencyName",
        DataValueField = "ID",
        Url = _hrm_Hr_Service + "Cat_GetData/GetMultiCurrency",
        StyleCss = "width:60px;",
        Value = Model == null ? string.Empty : Model.CurenncyID2.ToString(),
    };
                                                        }
                                                        @(Html.VnrComboBoxFor(mode => mode.CurenncyID2, CurenncyID2Name).Text(Model == null ? string.Empty : Model.CurenncyAllowance1Name))
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="div3" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.Allowance2)
                                                </div>
                                                <div class="FieldValue">
                                                    <div>
                                                        <div style="float:left">
                                                            @{
    var AllowanceID2Name = new ComboBoxBuilderInfo()
    {
        Name = "ProfileNotContractInfo_AllowanceID2",
        DataTextField = "UsualAllowanceName",
        DataValueField = "ID",
        Url = _hrm_Hr_Service + "Cat_GetData/GetMultiUsualAllowance",
        StyleCss = "width:150px;",
        Value = Model == null ? string.Empty : Model.AllowanceID2.ToString(),
    };
                                                            }
                                                            @(Html.VnrComboBoxFor(mode => mode.AllowanceID2, AllowanceID2Name).Text(Model == null ? string.Empty : Model.AllowanceID2Name))
                                                        </div>
                                                        <div style="float: left; padding-left: 2px">
                                                            @{
    var Allowance2 = new NumericTextBoxBuilderInfo<double>()
    {
        Name = "ProfileNotContractInfo_Allowance2",
        StyleCss = "width:90px",
        Format = ConstantFormat.HRM_Format_Money
    };
                                                            }
                                                            @Html.VnrNumericTextBoxFor(model => model.Allowance2, Allowance2)
                                                        </div>
                                                        <div style="float: left; padding-left: 2px">
                                                            @{
    var CurenncyAllowance2Name = new ComboBoxBuilderInfo()
    {
        Name = "ProfileNotContractInfo_CurenncyID3",
        DataTextField = "CurrencyName",
        DataValueField = "ID",
        Url = _hrm_Hr_Service + "Cat_GetData/GetMultiCurrency",
        StyleCss = "width:60px;",
        Value = Model == null ? string.Empty : Model.CurenncyID3.ToString(),
    };
                                                            }
                                                            @(Html.VnrComboBoxFor(mode => mode.CurenncyID3, CurenncyAllowance2Name).Text(Model == null ? string.Empty : Model.CurenncyAllowance2Name))

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="div3" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.Allowance3)
                                                </div>
                                                <div class="FieldValue">
                                                    <div>
                                                        <div>
                                                            <div style="float:left">
                                                                @{
    var AllowanceID3Name = new ComboBoxBuilderInfo()
    {
        Name = "ProfileNotContractInfo_AllowanceID3",
        DataTextField = "UsualAllowanceName",
        DataValueField = "ID",
        Url = _hrm_Hr_Service + "Cat_GetData/GetMultiUsualAllowance",
        StyleCss = "width:150px;",
        Value = Model == null ? string.Empty : Model.AllowanceID3.ToString(),
    };
                                                                }
                                                                @(Html.VnrComboBoxFor(mode => mode.AllowanceID3, AllowanceID3Name).Text(Model == null ? string.Empty : Model.AllowanceID3Name))

                                                            </div>
                                                            <div style="float: left; padding-left: 2px">
                                                                @{
    var Allowance3 = new NumericTextBoxBuilderInfo<double>()
    {
        Name = "ProfileNotContractInfo_Allowance3",
        StyleCss = "width:90px",
        Format = ConstantFormat.HRM_Format_Money
    };
                                                                }
                                                                @Html.VnrNumericTextBoxFor(model => model.Allowance3, Allowance3)
                                                            </div>
                                                            <div style="float: left; padding-left: 2px">
                                                                @{
    var CurenncyAllowance3Name = new ComboBoxBuilderInfo()
    {
        Name = "ProfileNotContractInfo_CurenncyIDSalary",
        DataTextField = "CurrencyName",
        DataValueField = "ID",
        Url = _hrm_Hr_Service + "Cat_GetData/GetMultiCurrency",
        StyleCss = "width:60px;",
        Value = Model == null ? string.Empty : Model.CurenncyIDSalary.ToString(),
    };
                                                                }
                                                                @(Html.VnrComboBoxFor(mode => mode.CurenncyIDSalary, CurenncyAllowance3Name).Text(Model == null ? string.Empty : Model.CurenncyAllowance3Name))
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="div3" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.Allowance4)
                                                </div>
                                                <div class="FieldValue">
                                                    <div>
                                                        <div style="float:left">
                                                            @{
    var AllowanceID4Name = new ComboBoxBuilderInfo()
    {
        Name = "ProfileNotContractInfo_AllowanceID4",
        DataTextField = "UsualAllowanceName",
        DataValueField = "ID",
        Url = _hrm_Hr_Service + "Cat_GetData/GetMultiUsualAllowance",
        StyleCss = "width:150px;",
        Value = Model == null ? string.Empty : Model.AllowanceID4.ToString(),
    };
                                                            }
                                                            @(Html.VnrComboBoxFor(mode => mode.AllowanceID4, AllowanceID4Name).Text(Model == null ? string.Empty : Model.AllowanceID4Name))
                                                        </div>
                                                        <div style="float: left; padding-left: 2px">
                                                            @{
    var Allowance4 = new NumericTextBoxBuilderInfo<double>()
    {
        Name = "ProfileNotContractInfo_Allowance4",
        StyleCss = "width:90px",
        Format = ConstantFormat.HRM_Format_Money
    };
                                                            }
                                                            @Html.VnrNumericTextBoxFor(model => model.Allowance4, Allowance4)
                                                        </div>
                                                        <div style="float: left; padding-left: 2px">
                                                            @{
    var CurenncyAllowance4Name = new ComboBoxBuilderInfo()
    {
        Name = "ProfileNotContractInfo_CurenncyID4",
        DataTextField = "CurrencyName",
        DataValueField = "ID",
        Url = _hrm_Hr_Service + "Cat_GetData/GetMultiCurrency",
        StyleCss = "width:60px;",
        Value = Model == null ? string.Empty : Model.CurenncyID4.ToString(),
    };
                                                            }
                                                            @(Html.VnrComboBoxFor(mode => mode.CurenncyID4, CurenncyAllowance4Name).Text(Model == null ? string.Empty : Model.CurenncyAllowance4Name))
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="div3" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.Allowance)
                                                </div>
                                                <div class="FieldValue">
                                                    <div>

                                                        <div style="float:left">
                                                            @{
    var Allowance = new NumericTextBoxBuilderInfo<double>()
    {
        Name = "ProfileNotContractInfo_Allowance",
        StyleCss = "width:150px",
        Format = ConstantFormat.HRM_Format_Money
    };
                                                            }
                                                            @Html.VnrNumericTextBoxFor(model => model.Allowance, Allowance)
                                                        </div>
                                                        <div style="float: left; padding-left: 2px">
                                                            @{
    var CurenncyOAllowanceName = new ComboBoxBuilderInfo()
    {
        Name = "ProfileNotContractInfo_CurenncyID5",
        DataTextField = "CurrencyName",
        DataValueField = "ID",
        Url = _hrm_Hr_Service + "Cat_GetData/GetMultiCurrency",
        StyleCss = "width:150px;",
        Value = Model == null ? string.Empty : Model.CurenncyID5.ToString(),
    };
                                                            }
                                                            @(Html.VnrComboBoxFor(mode => mode.CurenncyID5, CurenncyOAllowanceName).Text(Model == null ? string.Empty : Model.CurenncyOAllowanceName))

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="div3" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.RankRateID)
                                                </div>
                                                <div class="FieldValue">
                                                    <div>
                                                        @{
    var RankRateName = new ComboBoxBuilderInfo()
    {
        DataTextField = "SalaryRankName",
        DataValueField = "ID",
        Url = _hrm_Hr_Service + "Cat_GetData/GetMultiSalaryRank",
        StyleCss = "width:300px;",
        Value = Model == null ? string.Empty : Model.RankRateID.ToString(),
    };
                                                        }
                                                        @(Html.VnrComboBoxFor(mode => mode.RankRateID, RankRateName).Text(Model == null ? string.Empty : Model.SalaryRankName))
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="div3" class="DivContentTitleValue">
                                                <div class="FieldTitle150">
                                                    @Html.VnrLabelFor(mode => mode.ClassRateID)
                                                </div>
                                                <div class="FieldValue">
                                                    <div>
                                                        @{
    var ClassRateName = new ComboBoxBuilderInfo()
    {
        DataTextField = "SalaryClassName",
        DataValueField = "ID",
        Url = _hrm_Hr_Service + "Cat_GetData/GetMultiSalaryClass",
        StyleCss = "width:300px;",
        Value = Model == null ? string.Empty : Model.ClassRateID.ToString(),
    };
                                                        }
                                                        @(Html.VnrComboBoxFor(mode => mode.ClassRateID, ClassRateName).Text(Model == null ? string.Empty : Model.ClassRateName))
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </fieldset>
                            </div>

                        </div>
                    </div>
                </td>
                <td class="Box_Mid_Right">&nbsp;&nbsp;&nbsp;&nbsp;</td>
            </tr>
            <tr id="girdAppendContract" hidden="hidden">
                <td colspan="3">
                    <div class="commandToolBarWidge" style="height:28px">
                        <div style="float:left; padding-top:7px">
                            @Html.VnrLabel(ConstantDisplay.HRM_Hr_AppendixContract_Title.TranslateString())

                        </div>

                        <div style="float:right">
                            <div class="HideExportCate">
                                @Html.VnrButton(new ButtonBuilderInfo() { Name = "btnExport", Content = ConstantAction.HRM_Common_Export.TranslateString(), ImageUrl = ConstantPath.IconExportPath })
                            </div>
                            @Html.VnrButton(new ButtonBuilderInfo() { Name = "btnCreateAppendixContract", Content = ConstantAction.HRM_Common_Create.TranslateString(), ImageUrl = ConstantPath.IconAddNewPath })
                            @Html.VnrButton(new ButtonBuilderInfo() { Name = "btnDelete", Content = ConstantAction.HRM_Common_Delete.TranslateString(), ImageUrl = ConstantPath.IconDeletePath })
                        </div>
                    </div>
                    <div>
                        <!--Khai báo các thông tin cho Grid-->
                        @*@using HRM.Presentation.Category.Models*@
                        @using HRM.Presentation.UI.Controls.Kendo
                        @{
    //Thông tin hiển column hiển thị
    string[] valueFields = new string[]
                            {
                                Hre_AppendixContractModel.FieldNames.Code,
                                Hre_AppendixContractModel.FieldNames.AppendixContractType,
                                Hre_AppendixContractModel.FieldNames.DateSignedAppendixContract,
                                Hre_AppendixContractModel.FieldNames.DateofEffect,
                                Hre_AppendixContractModel.FieldNames.DateEndAppendixContract,
                                Hre_AppendixContractModel.FieldNames.Amount
                            };

    //Set độ rộng cho từng column
    Dictionary<string, int> sizeFields = new Dictionary<string, int>()
                            {
                                {HRM.Presentation.Hr.Models.Hre_AppendixContractModel.FieldNames.Code, 150},
                                {Hre_AppendixContractModel.FieldNames.AppendixContractType, 150},
                                {Hre_AppendixContractModel.FieldNames.DateSignedAppendixContract, 100},
                                {Hre_AppendixContractModel.FieldNames.DateofEffect, 130},
                                {Hre_AppendixContractModel.FieldNames.DateEndAppendixContract, 150},
                                {Hre_AppendixContractModel.FieldNames.Amount, 120}
                            };

    //Thông tin hiển thị được dịch
    Dictionary<string, string> displayFields = new Dictionary<string, string>()
                            {
                                {Hre_AppendixContractModel.FieldNames.Code, ConstantDisplay.HRM_HR_AppendixContract_Code},
                                {Hre_AppendixContractModel.FieldNames.AppendixContractType, ConstantDisplay.HRM_HR_AppendixContract_AppendixContractType},
                                {Hre_AppendixContractModel.FieldNames.DateSignedAppendixContract, ConstantDisplay.HRM_HR_AppendixContract_DateSignedAppendixContract},
                                {Hre_AppendixContractModel.FieldNames.DateofEffect, ConstantDisplay.HRM_HR_AppendixContract_DateofEffect},
                                {Hre_AppendixContractModel.FieldNames.DateEndAppendixContract, ConstantDisplay.HRM_HR_AppendixContract_DateEndAppendixContract},
                                {Hre_AppendixContractModel.FieldNames.Amount, ConstantDisplay.HRM_HR_AppendixContract_Amount}
                            };

    var grid = new GridBuilderInfo
    {
        Name = ConstantControlName.HRM_HR_AppendixContract_Grid_Name,
        ValueFields = valueFields,
        SizeFields = sizeFields,
        DisplayFields = displayFields,
        ShowCommand = false,
        GridHeight = 150,
        AutoBind = true,
        ReadActionUrl = _hrm_Hre_Service + "Hre_GetData/GetAppendixContractByContractList?ContractID=" + contractID,
        ReadData = "filterFieldInfo",
    };
                        }
                        <!--Khởi tạo Grid-->
                        @(Html.VnrGrid<Hre_AppendixContractModel>(grid)
                               .DataSource(dataSource => dataSource
                                   .Ajax()
                                           .Model(model => model.Field(o => o.ContractNo).Editable(false))
                                  )
                        )
                    </div>
                </td>
            </tr>
            <tr>
                <td style="padding-top:2px; padding-bottom:10px;">
                    <div class="LineFooterCommandEdit">
                    </div>
                </td>
            </tr>
            <tr>
                <td class="">&nbsp;&nbsp;&nbsp;</td>
                <td valign="top">
                    <div class="FieldTitle150"></div>
                    <div class="FieldValue">
                        @Html.VnrButton(new ButtonBuilderInfo() { EventClick = "onSaveDataPopUp", Name = "save-ProfileNotContract", Content = ConstantAction.HRM_Common_Save.TranslateString(), ImageUrl = ConstantPath.IconSavePath })
                        @*@Html.VnrButton(new ButtonBuilderInfo() { EventClick = "onSaveNew", Name = "save-New-Contract", Content = ConstantAction.HRM_Common_SaveNew.TranslateString(), ImageUrl = ConstantPath.IconSavePath })*@
                        @Html.VnrButton(new ButtonBuilderInfo() { EventClick = "onSaveClose", Name = "save-close-ProfileNotContract", Content = ConstantAction.HRM_Common_SaveClose.TranslateString(), ImageUrl = ConstantPath.IconSavePath })
                    </div>
                </td>
                <td class="Box_Mid_Right">&nbsp;&nbsp;&nbsp;&nbsp;</td>
            </tr>

        </tbody>
    </table>
}
<script>
    $("#gridAppendixContract .k-grid-pager").css('display', 'none');
</script>